{% load i18n %}
{% with lang=LANGUAGE_CODE|default:'ru' %}
<div id="cookie-consent-overlay" class="pointer-events-none fixed inset-x-0 bottom-0 z-[9998] hidden px-4 pb-6" data-cookie-lang="{{ lang }}" role="dialog" aria-modal="true" aria-labelledby="cookie-consent-title">
    <div class="pointer-events-auto mx-auto flex w-full max-w-5xl flex-col gap-4 rounded-3xl border border-amber-200 bg-white/95 px-6 py-5 shadow-[0_20px_60px_-15px_rgba(0,0,0,0.35)] backdrop-blur-lg text-slate-900">
        <div class="flex flex-col gap-3 sm:flex-row sm:items-start sm:gap-5">
            <div class="hidden h-12 w-12 shrink-0 items-center justify-center rounded-full bg-amber-100 text-amber-500 sm:flex">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M20.488 9.357a8.25 8.25 0 11-11.831-6.794 3.375 3.375 0 004.74 4.74 3.375 3.375 0 006.794 4.74 8.214 8.214 0 010 5.33" />
                </svg>
            </div>
            <div class="flex-1 space-y-2 text-sm leading-relaxed sm:text-base">
                {% if lang == 'en' %}
                    <h2 id="cookie-consent-title" class="text-lg font-semibold text-slate-900 sm:text-xl">Cookie consent &amp; GDPR notice</h2>
                    <p>We use essential cookies to keep this website secure and optional analytics cookies to improve services. As a controller established in the EEA we process personal data under Articles 6(1)(a) and 6(1)(f) of the GDPR.</p>
                    <ul class="list-disc pl-5 text-slate-600">
                        <li>Essential cookies are strictly necessary for security, language preferences, and service continuity.</li>
                        <li>Analytics cookies help us understand demand for Phuket properties and improve consultations.</li>
                        <li>You can withdraw consent at any time by clearing cookies or contacting us.</li>
                    </ul>
                    <p class="text-sm text-slate-500">Read the full privacy notice <a href="/{{ lang }}/privacy/" class="underline decoration-dotted">here</a> or exercise your rights via <a href="/{{ lang }}/contact/" class="underline decoration-dotted">our contact form</a>.</p>
                {% elif lang == 'th' %}
                    <h2 id="cookie-consent-title" class="text-lg font-semibold text-slate-900 sm:text-xl">การใช้คุกกี้และ PDPA</h2>
                    <p>เราใช้คุกกี้ที่จำเป็นเพื่อให้เว็บไซต์ทำงานได้อย่างปลอดภัย และคุกกี้วิเคราะห์เพื่อปรับปรุงบริการ ตามพระราชบัญญัติคุ้มครองข้อมูลส่วนบุคคล พ.ศ. 2562 (PDPA) เราจะประมวลผลข้อมูลเมื่อได้รับความยินยอมจากคุณ</p>
                    <ul class="list-disc pl-5 text-slate-600">
                        <li>คุกกี้ที่จำเป็นช่วยให้ระบบภาษา การเข้าสู่ระบบ และความปลอดภัยทำงานได้ราบรื่น</li>
                        <li>คุกกี้วิเคราะห์ช่วยให้เราเข้าใจตลาดอสังหาริมทรัพย์ภูเก็ตและปรับบริการให้เหมาะสม</li>
                        <li>คุณสามารถเพิกถอนความยินยอมได้ทุกเมื่อโดยลบคุกกี้หรือ <a href="/{{ lang }}/contact/" class="underline decoration-dotted">ติดต่อเรา</a></li>
                    </ul>
                    <p class="text-sm text-slate-500">อ่านประกาศความเป็นส่วนตัวฉบับเต็ม <a href="/{{ lang }}/privacy/" class="underline decoration-dotted">ที่นี่</a>.</p>
                {% else %}
                    <h2 id="cookie-consent-title" class="text-lg font-semibold text-slate-900 sm:text-xl">Использование файлов cookie</h2>
                    <p>Мы применяем необходимые cookie для стабильной работы сайта и дополнительные аналитические cookie для улучшения сервисов. Обработка персональных данных ведётся согласно Федеральному закону № 152-ФЗ «О персональных данных».</p>
                    <ul class="list-disc pl-5 text-slate-600">
                        <li>Обязательные cookie обеспечивают безопасность, выбранный язык и корректное отображение предложений.</li>
                        <li>Аналитические cookie помогают оценивать спрос на недвижимость и качество консультаций.</li>
                        <li>Вы можете отозвать согласие в любой момент, очистив cookie или <a href="/{{ lang }}/contact/" class="underline decoration-dotted">связавшись с нами</a>.</li>
                    </ul>
                    <p class="text-sm text-slate-500">Полная политика обработки персональных данных доступна <a href="/{{ lang }}/privacy/" class="underline decoration-dotted">по ссылке</a>.</p>
                {% endif %}
            </div>
        </div>
        <div class="flex flex-col gap-3 sm:flex-row sm:justify-end">
            <button type="button" id="cookie-consent-decline" class="inline-flex items-center justify-center rounded-full border border-slate-300 px-5 py-2 text-sm font-medium text-slate-600 transition hover:border-slate-400 hover:bg-white focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-400">
                {% if lang == 'en' %}Reject non-essential{% elif lang == 'th' %}ปฏิเสธคุกกี้ที่ไม่จำเป็น{% else %}Отклонить необязательные{% endif %}
            </button>
            <button type="button" id="cookie-consent-accept" class="inline-flex items-center justify-center rounded-full bg-amber-500 px-6 py-2 text-sm font-semibold text-white shadow-lg transition hover:bg-amber-400 focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300">
                {% if lang == 'en' %}Accept all{% elif lang == 'th' %}ยอมรับทั้งหมด{% else %}Принять все{% endif %}
            </button>
        </div>
    </div>
</div>
{% endwith %}
