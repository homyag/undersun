{% extends "admin/base.html" %}
{% load i18n static %}

{% block extrahead %}
{{ block.super }}
<link rel="stylesheet" type="text/css" href="{% static 'admin/css/language_selector.css' %}">

<!-- Fix for permissions policy violations in Django admin -->
<script src="{% static 'admin/js/fixes/permissions-policy-fix.js' %}"></script>

<!-- Required fields indicator -->
<script src="{% static 'admin/js/required_fields.js' %}"></script>
<link rel="stylesheet" href="{% static 'admin/css/required_fields.css' %}">

<!-- Include SortableJS for drag & drop functionality -->
<script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.2/Sortable.min.js"></script>
<script src="{% static 'admin/js/sortable_images.js' %}"></script>
<link rel="stylesheet" href="{% static 'admin/css/sortable_images.css' %}">
<link rel="stylesheet" href="{% static 'admin/css/sticky_scrollbar.css' %}">
<script src="{% static 'admin/js/sticky_scrollbar.js' %}"></script>
{% endblock %}

{% block usertools %}
<div id="language-selector">
    <form action="{% url 'set_language' %}" method="post">
        {% csrf_token %}
        <select name="language" onchange="this.form.submit()" title="{% trans 'Выберите язык' %}">
            {% get_current_language as LANGUAGE_CODE %}
            {% get_available_languages as LANGUAGES %}
            {% get_language_info_list for LANGUAGES as languages %}
            {% for language in languages %}
                <option value="{{ language.code }}"
                    {% if language.code == LANGUAGE_CODE %}selected{% endif %}>
                    {{ language.name_local }}
                </option>
            {% endfor %}
        </select>
    </form>
</div>
{{ block.super }}
{% endblock %}
