{% load i18n %}

<!-- Sort & Results Count -->
<div class="flex flex-col gap-4 sm:flex-row justify-between items-start sm:items-center mb-6">
    <div class="mb-4 sm:mb-0">
        <h2 class="text-xl font-semibold text-gray-900 results-count"
            data-heading-tag="H2"
            data-total-count="{% if properties %}{% if is_paginated %}{{ paginator.count }}{% else %}{{ properties|length }}{% endif %}{% else %}0{% endif %}">
            {% if properties %}
                {% if is_paginated %}
                    {% blocktrans count counter=paginator.count %}
                        Найден {{ counter }} объект
                    {% plural %}
                        Найдено {{ counter }} объектов
                    {% endblocktrans %}
                {% else %}
                    {% blocktrans count counter=properties|length %}
                        Найден {{ counter }} объект
                    {% plural %}
                        Найдено {{ counter }} объектов
                    {% endblocktrans %}
                {% endif %}
            {% else %}
                {% trans "Объекты не найдены" %}
            {% endif %}
        </h2>
    </div>
    
    {% if properties %}
    <div class="flex flex-col sm:flex-row items-stretch sm:items-center gap-4 w-full sm:w-auto">
        <div class="flex items-center space-x-2">
            <span class="text-sm text-gray-600 whitespace-nowrap">{% trans "Сортировка:" %}</span>
            <select onchange="updateSort(this.value)" class="px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-accent focus:border-accent">
            <option value="-created_at" {% if request.GET.sort == '-created_at' %}selected{% endif %}>{% trans "По дате" %}</option>
            <option value="price_sale_usd" {% if request.GET.sort == 'price_sale_usd' %}selected{% endif %}>{% trans "Цена ↑" %}</option>
            <option value="-price_sale_usd" {% if request.GET.sort == '-price_sale_usd' %}selected{% endif %}>{% trans "Цена ↓" %}</option>
            <option value="-area_total" {% if request.GET.sort == '-area_total' %}selected{% endif %}>{% trans "Площадь ↓" %}</option>
            </select>
        </div>

        <div class="flex items-center space-x-2">
            <span class="text-sm text-gray-600 whitespace-nowrap">{% trans "Режим:" %}</span>
            <select onchange="changeView(this.value)" class="px-4 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-accent focus:border-accent min-w-[9rem]" aria-label="{% trans 'Режим просмотра' %}" data-view-select>
                <option value="grid" {% if request.GET.map_view != 'true' %}selected{% endif %}>{% trans "Список" %}</option>
                <option value="map" {% if request.GET.map_view == 'true' %}selected{% endif %}>{% trans "Карта" %}</option>
            </select>
        </div>
    </div>
    {% endif %}
</div>
